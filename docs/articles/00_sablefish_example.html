<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sablefish MSE Example • SablefishMSE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sablefish MSE Example">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SablefishMSE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/SablefishMSE.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/00_sablefish_example.html">Sablefish MSE Example</a></li>
    <li><a class="dropdown-item" href="../articles/01_operating_model.html">Defining an Operating Model</a></li>
    <li><a class="dropdown-item" href="../articles/02_recruitment.html">Specifying Recruitment</a></li>
    <li><a class="dropdown-item" href="../articles/03_estimation_model.html">Estimation Method</a></li>
    <li><a class="dropdown-item" href="../articles/04_management_procedure.html">Defining a Management Procedure</a></li>
    <li><a class="dropdown-item" href="../articles/05_running_mse.html">Running the MSE</a></li>
    <li><a class="dropdown-item" href="../articles/06_processing_mse_results.html">Processing MSE Output Data</a></li>
    <li><a class="dropdown-item" href="../articles/07_plotting_mse_results.html">Visualizing MSE Outputs</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sablefish MSE Example</h1>
            
      

      <div class="d-none name"><code>00_sablefish_example.Rmd</code></div>
    </div>

    
    
<p>A fully worked example of this MSE framework for Alaska Sablefish
follows. This example includes the following features:</p>
<ul>
<li>multiple operating models</li>
<li>multiple harvest control rules</li>
<li>state-dependent and state-independent recruitment functions</li>
<li>HCRs with stability constraints and harvest caps</li>
<li>HCRs with different reference point levels</li>
<li>Parallel MSE simulations</li>
<li>MSE output processing and plotting.</li>
</ul>
<div class="section level3">
<h3 id="defining-operating-models">Defining Operating Models<a class="anchor" aria-label="anchor" href="#defining-operating-models"></a>
</h3>
<p>A base operating model (OM) object is already available to the
package to start from. As all of the OMs developed for this example vary
only in terms of how recruitment is projected in the future, we will
load that base OM object in, and simply modify the recruitment
parameter.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyears</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span></span>
<span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"sable_om.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Also load the historical recruitment timeseries</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"sable_assessment.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hist_recruits</span> <span class="op">&lt;-</span> <span class="va">assessment</span><span class="op">$</span><span class="va">natage.female</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="fl">2</span></span></code></pre></div>
<p>OM1 will project future recruitment by resampling from the historical
recruitment timeseries, using the <code>resample_recruits</code>
function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Normal recruitment</span></span>
<span><span class="va">om_rand_recruit</span> <span class="op">&lt;-</span> <span class="va">sable_om</span></span>
<span><span class="va">om_rand_recruit</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"Random Recruitment"</span></span>
<span><span class="va">om_rand_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">func</span> <span class="op">&lt;-</span> <span class="va">resample_recruits</span></span>
<span><span class="va">om_rand_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    hist_recruits <span class="op">=</span> <span class="va">hist_recruits</span>,</span>
<span>    nyears <span class="op">=</span> <span class="fl">10</span><span class="op">*</span><span class="va">nyears</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>OM2 projects future recruitment via a Beverton-Holt stock recruit
relationship with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mn>0.0</mn><mn>.85</mn></mrow><annotation encoding="application/x-tex">h=0.0.85</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mi>R</mi></msub><mo>=</mo><mn>1.20</mn></mrow><annotation encoding="application/x-tex">\sigma_R = 1.20</annotation></semantics></math>.
As a state-dependent recruitment function, the underlying
<code>beverton_holt</code> R function is a “function factory”, whose
returned function is used internally by the MSE to compute recruitment
based on current spawning biomass.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B-H recruitment</span></span>
<span><span class="va">om_bh_recruit</span> <span class="op">&lt;-</span> <span class="va">sable_om</span></span>
<span><span class="va">om_bh_recruit</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"Beverton-Holt Recruitment"</span></span>
<span><span class="va">om_bh_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">func</span> <span class="op">&lt;-</span> <span class="va">beverton_holt</span></span>
<span><span class="va">om_bh_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    h <span class="op">=</span> <span class="fl">0.85</span>,</span>
<span>    R0 <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    S0 <span class="op">=</span> <span class="va">sbpr</span><span class="op">*</span><span class="fl">15</span>,</span>
<span>    sigR <span class="op">=</span> <span class="fl">1.20</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>OM3 projects future recruitment as occurring in distinct regimes:
first a “low” regime for 20 years, followed by a “high” regime for 5
years. The regimes each have a uniquely parameterized Beverton-Holt
stock recruitment relationships that differ with respect to the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>S</mi><mn>0</mn></msub><annotation encoding="application/x-tex">S_0</annotation></semantics></math>
parameters.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">om_bhcyclic_recruit</span> <span class="op">&lt;-</span> <span class="va">sable_om</span></span>
<span><span class="va">om_bhcyclic_recruit</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"Beverton-Holt Cyclic Recruitment"</span></span>
<span><span class="va">om_bhcyclic_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">func</span> <span class="op">&lt;-</span> <span class="va">bevholt_regimes</span></span>
<span><span class="va">om_bhcyclic_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    h <span class="op">=</span> <span class="fl">0.85</span>,</span>
<span>    sbpr <span class="op">=</span> <span class="va">sbpr</span>,</span>
<span>    R0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12.5</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    sigR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.20</span>, <span class="fl">1.20</span><span class="op">)</span>,</span>
<span>    nyears <span class="op">=</span> <span class="fl">10</span><span class="op">*</span><span class="va">nyears</span>,</span>
<span>    regime_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>    starting_regime <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>OM4 assumes that recruitment crashes for the first 20 years of the
projection period, while the recruitment for the remainder of the
projection period is historically resamples as in OM1.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">om_immcrash_recruit</span> <span class="op">&lt;-</span> <span class="va">sable_om</span></span>
<span><span class="va">om_immcrash_recruit</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"Immediate Crash Recruitment"</span></span>
<span><span class="va">om_immcrash_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">func</span> <span class="op">&lt;-</span> <span class="va">recruits_crash</span></span>
<span><span class="va">om_immcrash_recruit</span><span class="op">$</span><span class="va">recruitment</span><span class="op">$</span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    crash_start_year <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    crash_length <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    crash_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">hist_recruits</span><span class="op">)</span>,</span>
<span>    hist_recruits <span class="op">=</span> <span class="va">hist_recruits</span>,</span>
<span>    nyears <span class="op">=</span> <span class="fl">10</span><span class="op">*</span><span class="va">nyears</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The four OM objects are placed in a master list that will later be
passed to the MSE function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">om_list</span> <span class="op">&lt;-</span> <span class="fu">listN</span><span class="op">(</span><span class="va">om_rand_recruit</span>, <span class="va">om_bh_recruit</span>, <span class="va">om_bhcyclic_recruit</span>, <span class="va">om_immcrash_recruit</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="defining-management-procedures">Defining Management Procedures<a class="anchor" aria-label="anchor" href="#defining-management-procedures"></a>
</h3>
<p>Management procedures (MPs) are specified as a complex list of values
that define the specifics of the harvest control rule to be applied, the
reference point targets to use, ABC-TAC and TAC-landings reductions,
survey frequency, and assessment frequency. A default MP object is
available through the <code>setup_mp_options</code> function. The eleven
MPs specified here differ only in terms of their HCR function and their
reference point target, so the default MP object can, largely be
reused.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_base</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_mp_options.html">setup_mp_options</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>MP1 is the NPFMC Tier 3 HCR that is currently used to manage
sablefish in Alaska. It is a threshold HCR that uses a target reference
point of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>P</mi><msub><mi>R</mi><mrow><mn>40</mn><mi>%</mi></mrow></msub></mrow><annotation encoding="application/x-tex">SPR_{40\%}</annotation></semantics></math>.
The HCR function (<code>tier3</code>) outputs in units of fishing
mortality (F), as specified by “units”. No harvest cap or stability
constraints are applied.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_f40</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_f40</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"F40"</span></span>
<span><span class="va">mp_f40</span><span class="op">$</span><span class="va">spr_target</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.40</span>, <span class="fl">0.40</span><span class="op">)</span></span>
<span><span class="va">mp_f40</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>MP2 and MP3 are simple variations on MP1, using different combination
of reference point targets. MP2 used
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>P</mi><msub><mi>R</mi><mrow><mn>50</mn><mi>%</mi></mrow></msub></mrow><annotation encoding="application/x-tex">SPR_{50\%}</annotation></semantics></math>
as the reference point target for both fishing mortality and spawning
biomass, while MP3 uses
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>P</mi><msub><mi>R</mi><mrow><mn>50</mn><mi>%</mi></mrow></msub></mrow><annotation encoding="application/x-tex">SPR_{50\%}</annotation></semantics></math>
as the target fishing mortality rate and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>P</mi><msub><mi>R</mi><mrow><mn>40</mn><mi>%</mi></mrow></msub></mrow><annotation encoding="application/x-tex">SPR_{40\%}</annotation></semantics></math>
as the target spawning biomass level.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_f50</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_f50</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"F50"</span></span>
<span><span class="va">mp_f50</span><span class="op">$</span><span class="va">ref_points</span><span class="op">$</span><span class="va">spr_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">mp_f50</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mp_b40f55</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_b40f55</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"B40/F55"</span></span>
<span><span class="va">mp_b40f55</span><span class="op">$</span><span class="va">ref_points</span><span class="op">$</span><span class="va">spr_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.55</span>, <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="va">mp_b40f55</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>MP4 and MP5 are another simple variation on MP1, where stability
constraints of 5% and 10% are applied to the ABC. Otherwise, these MPs
are defined exactly as MP1.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_5perc</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_5perc</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"F40 +/- 5%"</span></span>
<span><span class="va">mp_5perc</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mp_10perc</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_10perc</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"F40 +/- 10%"</span></span>
<span><span class="va">mp_10perc</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="fl">0.10</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>MP6 and MP7 are another simple variation on MP1, whereby a maximum
permissible TAC is implemented. If the recommended TAC (via evaluation
of the harvest control rule and after application of the ABC-TAC
reduction) exceeds the specified harvest cap, the TAC will be reduced to
the harvest cap exactly. Attainment will be applied after the harvest
cap has been applied. Harvest caps are 15k, 25k mt respectively.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_15cap</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_15cap</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"15k Harvest Cap"</span></span>
<span><span class="va">mp_15cap</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="fl">15</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mp_25cap</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_25cap</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"25k Harvest Cap"</span></span>
<span><span class="va">mp_25cap</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">tier3</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="fl">25</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>MP8 is a constant fishing mortality rate rule that applies
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><mn>50</mn></msub><annotation encoding="application/x-tex">F_{50}</annotation></semantics></math>
at all levels of spawning biomass.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_f50chr</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_f50chr</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"Constant F50"</span></span>
<span><span class="co"># Set biomass reference point to some small level to simulate a constant F rule</span></span>
<span><span class="va">mp_f50chr</span><span class="op">$</span><span class="va">ref_points</span><span class="op">$</span><span class="va">spr_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.50</span>, <span class="fl">0.001</span><span class="op">)</span></span>
<span><span class="va">mp_f50chr</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">chr</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>MP9 and MP10 are approximate implementations of the harvest control
rules used by other management bodies for Pacific sablefish.</p>
<p>MP9 is an implementation of the Pacific Fisheries Management
Council’s “40-10” HCR that is used to manage sablefish along the west
coast of the continental United States. This HCR traditionally operates
at the TAC level, but is implemented here so as to output an ABC, as the
other HCR functions do. MP9 uses a target fishing mortality rate of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>P</mi><msub><mi>R</mi><mrow><mn>45</mn><mi>%</mi></mrow></msub></mrow><annotation encoding="application/x-tex">SPR_{45\%}</annotation></semantics></math>
to approximate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><mtext mathvariant="normal">MSY</mtext></msub><annotation encoding="application/x-tex">F_{\text{MSY}}</annotation></semantics></math>,
and, unlike the other HCR functions, outputs in units of catch (“TAC”)
rather than F.</p>
<p>MP10 is an implementation of DFO Canada’s sablefish HCR that is used
for sablefish management in British Columbia, Canada. This HCR is a
threshold rule with a maximum harvest rate of 5.5%, which declines
towards 0 when
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">SSB</mtext><mo>&lt;</mo><mo>=</mo><mn>0.60</mn><msub><mi>B</mi><mrow><mi>M</mi><mi>S</mi><mi>Y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\text{SSB} &lt;= 0.60B_{MSY}</annotation></semantics></math>.
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>B</mi><mtext mathvariant="normal">MSY</mtext></msub><annotation encoding="application/x-tex">B_{\text{MSY}}</annotation></semantics></math>
is approximated as the spawning biomass resulting from fishing at a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><msub><mi>F</mi><mrow><mn>45</mn><mi>%</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F=F_{45\%}</annotation></semantics></math>,
akin to in MP9.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_pfmc4010</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_pfmc4010</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"PFMC 40-10"</span></span>
<span><span class="va">mp_pfmc4010</span><span class="op">$</span><span class="va">ref_points</span><span class="op">$</span><span class="va">spr_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.45</span>, <span class="fl">0.40</span><span class="op">)</span></span>
<span><span class="va">mp_pfmc4010</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">pfmc4010</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"TAC"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mp_bcsable</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_bcsable</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"British Columbia"</span></span>
<span><span class="va">mp_bcsable</span><span class="op">$</span><span class="va">ref_points</span><span class="op">$</span><span class="va">spr_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.45</span>, <span class="fl">0.45</span><span class="op">)</span></span>
<span><span class="va">mp_bcsable</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">bc_sable</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"F"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>MP11 is a simple rule that prohibits fishing at any level of
biomass.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp_f00chr</span> <span class="op">&lt;-</span> <span class="va">mp_base</span></span>
<span><span class="va">mp_f00chr</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"No Fishing"</span></span>
<span><span class="va">mp_f00chr</span><span class="op">$</span><span class="va">hcr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    func <span class="op">=</span> <span class="va">chr</span>,</span>
<span>    extra_pars <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    extra_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        max_stability <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>        harvest_cap <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    units <span class="op">=</span> <span class="st">"TAC"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">mp_f00chr</span><span class="op">$</span><span class="va">ref_points</span><span class="op">$</span><span class="va">spr_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.001</span><span class="op">)</span></span></code></pre></div>
<p>The eleven MP objects are placed in a master list that will later be
passed to the MSE function.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hcr_list</span> <span class="op">&lt;-</span> <span class="fu">listN</span><span class="op">(</span></span>
<span>    <span class="va">mp_f40</span>, <span class="va">mp_f50</span>, <span class="va">mp_b30f40</span>, <span class="va">mp_b40f50</span>,</span>
<span>    <span class="va">mp_5perc</span>, <span class="va">mp_10perc</span>, <span class="va">mp_10perc_up</span>, <span class="va">mp_15perc</span>,</span>
<span>    <span class="va">mp_15cap</span>, <span class="va">mp_25cap</span>,</span>
<span>    <span class="va">mp_f50chr</span>,</span>
<span>    <span class="va">mp_pfmc4010</span>, <span class="va">mp_bcsable</span>,</span>
<span>    <span class="va">mp_f00chr</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="defining-the-mse_options-object">Defining the <code>mse_options</code> Object<a class="anchor" aria-label="anchor" href="#defining-the-mse_options-object"></a>
</h3>
<p>An <code>mse_options</code> list object is also defined to provide
additional options to the MSE function. Critically, this list object
defines: the number of years to project for, the length of the OM
conditioning period, the simulation year in which to begin projecting
recruitment using the provided recruitment function, and whether the
estimation method should be run or not.</p>
<p>The default values are all appropriate for this case study, and can
be accessed using <code>setup_mse_options</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mse_options_base</span> <span class="op">&lt;-</span> <span class="fu">setup_mse_options</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mse_options</span> <span class="op">&lt;-</span> <span class="va">mse_options_base</span></span>
<span><span class="va">mse_options</span><span class="op">$</span><span class="va">n_spinup_years</span> <span class="op">&lt;-</span> <span class="fl">54</span></span>
<span><span class="va">mse_options</span><span class="op">$</span><span class="va">recruitment_start_year</span> <span class="op">&lt;-</span> <span class="fl">54</span></span>
<span><span class="va">mse_options</span><span class="op">$</span><span class="va">n_proj_years</span> <span class="op">&lt;-</span> <span class="fl">75</span></span>
<span></span>
<span><span class="va">mse_options_list</span> <span class="op">&lt;-</span> <span class="fu">listN</span><span class="op">(</span><span class="va">mse_options</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-the-mse">Running the MSE<a class="anchor" aria-label="anchor" href="#running-the-mse"></a>
</h3>
<p>Now that all of the OMs and MPs have been appropriately defined, the
full set of MSE simulation can be run. Here we will run each combination
of OM and MP for 9 random simulations in parallel. The parallel
computing overhead is handled internally by the MSE function and uses 2
fewer than the available number of compute cores on the machine.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nsims</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">seed_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fl">1000</span><span class="op">*</span><span class="va">nsims</span><span class="op">)</span>, <span class="va">nsims</span><span class="op">)</span>  <span class="co"># Draw 20 random seeds</span></span>
<span><span class="va">model_runs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_mse_multiple.html">run_mse_multiple</a></span><span class="op">(</span></span>
<span>    <span class="va">om_list</span>, </span>
<span>    <span class="va">hcr_list</span>, </span>
<span>    <span class="va">seed_list</span>,</span>
<span>    nyears<span class="op">=</span><span class="fl">100</span>,</span>
<span>    mse_options_list<span class="op">=</span><span class="va">mse_options_list</span>,</span>
<span>    diagnostics <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    save<span class="op">=</span><span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Depending on the number of OMs, MPs, seeds, and other options, this
function may take several hours to complete. A relatively fast machine,
with &gt;10 compute cores should take ~2 hours to complete all of the
simulations as specified above.</p>
</div>
<div class="section level3">
<h3 id="processing-mse-results">Processing MSE Results<a class="anchor" aria-label="anchor" href="#processing-mse-results"></a>
</h3>
<p>The above MSE will generate results from 44 unique models (11 HCRs
across 5 OMs), each model consisting of results for 20 simulations, with
each simulation having lasted 75 years. The amount of output data often
makes processing MSE results tricky. Multiple helper functions are
provided by the package to make processing results easier.</p>
<p>Before prcoessing output, create a data.frame that specifies which
models in the <code>model_runs</code> used which combination of OM and
MP object. Often this can be simply accomplished using
<code>expand.grid</code>, as this is what is used internally by
<code><a href="../reference/run_mse_multiple.html">run_mse_multiple()</a></code>. For readability and plotting purposes,
it is often useful to assign each OM and HCR a human readable name in
the same order as the objects appear in their respective lists
(<code>om_list</code> for OMs and <code>hcr_list</code> for MPs).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">om_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">om_list</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hcr_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">hcr_list</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">extra_columns2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>    om <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">om_list</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    hcr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">hcr_list</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Five helper functions are predefined to facilitate working with
common outputs from the MSE: spawning biomass, fishing mortality,
recruitment, ABC and TAC, and landed catch. Each function is defined
very similarly, taking the list of MSE output objects
(<code>model_runs</code>) and the data.frame of OMs and HCRs that apply
to each model (<code>extra_columns</code>). These are used internally by
each function to assign the correct OM and HCR name to each model, and
pull the correct data from the MSE outputs.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ssb_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ssb_biomass.html">get_ssb_biomass</a></span><span class="op">(</span><span class="va">model_runs</span>, <span class="va">extra_columns2</span>, <span class="va">sable_om</span><span class="op">$</span><span class="va">dem_params</span>, hcr_filter<span class="op">=</span><span class="va">hcr_names</span>, om_filter<span class="op">=</span><span class="va">om_names</span><span class="op">)</span></span>
<span></span>
<span><span class="va">f_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_fishing_mortalities.html">get_fishing_mortalities</a></span><span class="op">(</span><span class="va">model_runs</span>, <span class="va">extra_columns2</span>, hcr_filter<span class="op">=</span><span class="va">hcr_names</span>, om_filter<span class="op">=</span><span class="va">om_names</span><span class="op">)</span></span>
<span></span>
<span><span class="va">abctac</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_management_quantities.html">get_management_quantities</a></span><span class="op">(</span><span class="va">model_runs</span>, <span class="va">extra_columns2</span>, spinup_years<span class="op">=</span><span class="va">common_trajectory</span>, hcr_filter<span class="op">=</span><span class="va">hcr_names</span>, om_filter<span class="op">=</span><span class="va">om_names</span><span class="op">)</span></span>
<span></span>
<span><span class="va">catch_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_landed_catch.html">get_landed_catch</a></span><span class="op">(</span><span class="va">model_runs</span>, <span class="va">extra_columns2</span>, hcr_filter<span class="op">=</span><span class="va">publication_hcrs</span>, om_filter<span class="op">=</span><span class="va">om_names</span><span class="op">)</span></span></code></pre></div>
<p>These helper functions return tibbles in long format that can be
easily provided to <code>ggplot</code> for plotting or used within other
tidyverse style data processing pipelines. A plotting function is also
defined alongside each data processing function above, and will return a
<code>ggplot</code> object that can be further modified outside of the
function. For each plotting function, the parameter <code>v1</code>
corresponds to the column name assigned to the “color” aesthetic, and
the parameter <code>v2</code> corresponds to the column names to facet
by. Facetting by multiple variables (e.g. a facet grid) is not currently
supported by default.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_ssb</span><span class="op">(</span><span class="va">ssb_data</span>, v1<span class="op">=</span><span class="st">"hcr"</span>, v2<span class="op">=</span><span class="st">"om"</span>, v3<span class="op">=</span><span class="cn">NA</span>, common_trajectory<span class="op">=</span><span class="va">common_trajectory</span>, show_est <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot_relative_ssb</span><span class="op">(</span><span class="va">ssb_data</span>, v1<span class="op">=</span><span class="st">"hcr"</span>, v2<span class="op">=</span><span class="st">"om"</span>, common_trajectory <span class="op">=</span> <span class="va">common_trajectory</span>, base_hcr <span class="op">=</span> <span class="st">"No Fishing"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot_fishing_mortalities</span><span class="op">(</span><span class="va">f_data</span>, v1<span class="op">=</span><span class="st">"hcr"</span>, v2<span class="op">=</span><span class="st">"om"</span>, common_trajectory <span class="op">=</span> <span class="va">common_trajectory</span>, show_est<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot_abc_tac</span><span class="op">(</span><span class="va">abctac</span>, v1<span class="op">=</span><span class="st">"hcr"</span>, v2<span class="op">=</span><span class="st">"om"</span>, common_trajectory<span class="op">=</span><span class="va">common_trajectory</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">plot_landed_catch</span><span class="op">(</span><span class="va">catch_data</span>, v1<span class="op">=</span><span class="st">"hcr"</span>, v2<span class="op">=</span><span class="st">"om"</span>, common_trajectory <span class="op">=</span> <span class="va">common_trajectory</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="computing-performance-metrics">Computing Performance Metrics<a class="anchor" aria-label="anchor" href="#computing-performance-metrics"></a>
</h3>
<p>Helper functions are also provided to compute performance metrics.
Individual functions for each performance metric are available (though
outputs may require additional processing), or the
<code>performance_metric_summary</code> function can be used to quickly
compute all of them. Like with the other data processing functions, a
default plotting functions for performance metrics is also
available.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">perf_tradeoffs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/performance_metric_summary.html">performance_metric_summary</a></span><span class="op">(</span></span>
<span>    <span class="va">model_runs</span>, </span>
<span>    <span class="va">extra_columns</span>, </span>
<span>    <span class="va">sable_om</span><span class="op">$</span><span class="va">dem_params</span>, </span>
<span>    <span class="va">ref_naa</span>,</span>
<span>    hcr_filter<span class="op">=</span><span class="va">publication_hcrs</span>,</span>
<span>    om_filter<span class="op">=</span><span class="va">publication_oms</span>,</span>
<span>    interval_widths<span class="op">=</span><span class="va">interval_widths</span>,</span>
<span>    time_horizon <span class="op">=</span> <span class="va">time_horizon</span>, </span>
<span>    extra_filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    relative<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>    summarise_by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"om"</span>, <span class="st">"hcr"</span><span class="op">)</span>,</span>
<span>    summary_out <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    metric_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"avg_catch"</span>, <span class="st">"avg_variation"</span>, <span class="st">"avg_ssb"</span>, <span class="st">"avg_age"</span>, <span class="st">"prop_years_lowssb"</span><span class="op">)</span> </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">perf_data</span> <span class="op">&lt;-</span> <span class="va">performance_metrics</span><span class="op">$</span><span class="va">perf_data</span></span>
<span><span class="fu">plot_performance_metric_summary</span><span class="op">(</span><span class="va">perf_data</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua Zahner, Benjamin Williams, Dan Goethel, Curry Cunningham, Matt Cheng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
