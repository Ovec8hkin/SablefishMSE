<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Defining an Operating Model • SablefishMSE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Defining an Operating Model">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SablefishMSE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/SablefishMSE.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/00_sablefish_example.html">Sablefish MSE Example</a></li>
    <li><a class="dropdown-item" href="../articles/01_operating_model.html">Defining an Operating Model</a></li>
    <li><a class="dropdown-item" href="../articles/02_recruitment.html">Specifying Recruitment</a></li>
    <li><a class="dropdown-item" href="../articles/03_estimation_model.html">Estimation Method</a></li>
    <li><a class="dropdown-item" href="../articles/04_management_procedure.html">Defining a Management Procedure</a></li>
    <li><a class="dropdown-item" href="../articles/05_running_mse.html">Running the MSE</a></li>
    <li><a class="dropdown-item" href="../articles/06_processing_mse_results.html">Processing MSE Output Data</a></li>
    <li><a class="dropdown-item" href="../articles/07_plotting_mse_results.html">Visualizing MSE Outputs</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Defining an Operating Model</h1>
            
      

      <div class="d-none name"><code>01_operating_model.Rmd</code></div>
    </div>

    
    
<p>The <code>SablefishMSE</code> package makes use of the
<code>afscOM</code> package for defining the operating model (OM)
component of the MSE simulation loop. As such, defining OMs to use
within the MSE framework is identical to the process of defining a model
with <code>afscOM</code>.</p>
<div class="section level3">
<h3 id="an-introduction-to-afscom">An Introduction to <code>afscOM</code><a class="anchor" aria-label="anchor" href="#an-introduction-to-afscom"></a>
</h3>
<p><code>afscOM</code> is a age-structured, multi-sex, multi-fleet,
spatially explicit fisheries model that can be parameterized to elicit a
range of complex population dyanmics. Users can define how specific
demographic parameters (e.g. natural mortality, weight-at-age,
selectivity) change across time, age, sex, space, or by fleet, and the
model internally projects a population with such demographic
characteristics forwards in time. Observation processes can additionally
be defined allowing the users to simulate observations (with associated
error levels) from the population at each time step.</p>
<p>For more information on the <code>afscOM</code> package, including
examples and additional documentation, please see the <a href="https://benwilliams-noaa.github.io/afscOM" class="external-link">package
documentation</a>.</p>
</div>
<div class="section level3">
<h3 id="model-dimensions">Model Dimensions<a class="anchor" aria-label="anchor" href="#model-dimensions"></a>
</h3>
<p>Demographic parameters are defined using mutli-dimensional arrays in
<code>afscOM</code>. All demographic parameter arrays are the same
dimensions: <code>[nyears, nages, nsexes, nregions, nfleets]</code>
(demographic parameters, such as natural mortality, that dont vary by
fleet can drop the final dimension). Where:</p>
<ul>
<li>
<code>nyears</code> - the total number of years in the model</li>
<li>
<code>nages</code> - the number of ages to track</li>
<li>
<code>nsexes</code> - the number of sexes to track</li>
<li>
<code>nregions</code> - the number of spatial regions to track</li>
<li>
<code>nfleets</code> - the number of fishing fleets to track</li>
<li>
<code>nsurveys</code> - the number of scientific surveys to
track</li>
</ul>
<p>While the <code>afscOM</code> package can simulate populations using
any combination of the above the dimensions, the
<code>SablefishMSE</code> package has only been tested with 30 ages, 2
sexes, 1 spatial region, and 2 fishing fleets.</p>
</div>
<div class="section level3">
<h3 id="demographic-parameters">Demographic Parameters<a class="anchor" aria-label="anchor" href="#demographic-parameters"></a>
</h3>
<p>The multidimensional arrays that define demographic rates MUST always
follow the same dimension structure for <code>afscOM</code> models to
work correctly. Biological parameters, such as natural mortality,
maturity, and weight-at-age should all have array dimensions:
<code>[nyears, nages, nsexes, nregions]</code>. Fishery and survey fleet
parameters, such as selectivity, retention, and discard mortality,
should have array dimensions:
<code>[nyears, nages, nsexes, nregions, nfleets]</code> (for fishing
fleets) or <code>[nyears, nages, nsexes, nregions, nsurveys]</code> (for
survey fleets).</p>
<p>In this structure the first index along the “sex” dimension
(dimension 3) will correspond to parameters for females, while the
second index will correspond to parameters for males.</p>
<p>Required population parameters include:</p>
<ul>
<li>
<code>mort</code>: Natural mortality
<code>[nyears, nages, nsexes, nregions]</code>
</li>
<li>
<code>mat</code>: Maturity
<code>[nyears, nages, nsexes, nregions]</code>
</li>
<li>
<code>waa</code>: Weight-at-age
<code>[nyears, nages, nsexes, nregions]</code>
</li>
<li>
<code>sexrat</code>: Population sex ratio
<code>[nyears, nages, nsexes, nregions]</code>
</li>
<li>
<code>sel</code>: Fishery selectivity
<code>[nyears, nages, nsexes, nregions, nfleets]</code>
</li>
<li>
<code>ret</code>: Fishery retention
<code>[nyears, nages, nsexes, nregions, nfleets]</code>
</li>
<li>
<code>dmr</code>: Fishery discard mortality (as an instantenous
rate) <code>[nyears, nages, nsexes, nregions, nfleets]</code>
</li>
</ul>
<p>If observations are being simulated, survey selectivity must also be
specified:</p>
<ul>
<li>
<code>surv_sel</code>: Survey selectivity
<code>[nyears, nages, nsexes, nregions, nsurveys]</code>
</li>
</ul>
<p>For spatial models (those where nregions &gt; 1), a “movement”
demographic matrix is also required as input. Movement can be specified
to vary by age and sex, but can not currently vary through time.</p>
<ul>
<li>
<code>movement</code>: Movement matrix
<code>[nregions, nregions, nages, nsexes]</code>
</li>
</ul>
<p>For additional infromation on building the demographic arrays, see
the <a href="https://benwilliams-noaa.github.io/afscOM/articles/specifying_demographic_parameters.html" class="external-link"><code>afscOM</code>
documentation</a>.</p>
</div>
<div class="section level3">
<h3 id="observation-processes">Observation Processes<a class="anchor" aria-label="anchor" href="#observation-processes"></a>
</h3>
<p><code>afscOM</code> is capable of optionally simulating observations
(with associated observation error) from the population at each
timestep. Observation that can be simulated include:</p>
<ul>
<li>age compositions</li>
<li>relative population number indices (population indices)</li>
<li>relative population weight indices (biomass indices)</li>
<li>landed catch volume</li>
</ul>
<p>To simulate observations from the OM,
<code>om$model_options$simulae_observations = TRUE</code> should be
specified. Additionally, a list of observation parameters also needs to
be defined. Required observation parameters include:</p>
<p>Required items in the obs_pars list are:</p>
<ul>
<li>
<code>is_survey</code>: indicates whether a given fleet is a fishing
fleet or survey fleet (0 indicates a fishing fleet, 1 indicates a
scientific survey)</li>
<li>
<code>qs</code>: catchability coefficients</li>
<li>
<code>rpn</code>: whether to generate a relative population number
(RPN) index (0 = no, 1 = yes)</li>
<li>
<code>rpw</code>: whether to generate a relative population weight
(RPW) index (0 = no, 1 = yes)</li>
<li>
<code>rpn_cv</code>: a coefficient of variation (CV) to use when
generating RPN observations</li>
<li>
<code>rpw_cv</code>: a coefficient of variation (CV) to use when
generating RPW observations</li>
<li>
<code>acs</code>: whether to generate age composition observations
(0 = no, 1 = yes)</li>
<li>
<code>ac_samps</code>: number of samples to use when generating age
composition observations</li>
<li>
<code>ac_as_integers</code>: whether age composition observations
should be provided as integers or proportions (0 = no, 1 = yes)</li>
<li>
<code>acs_agg_sex</code>: whether age composition observations
should be aggregated by sex (0 = no, 1 = yes)</li>
</ul>
<p>While not required, when used within the wider MSE simulation loop,
the OM should always be parameterized to yield observations, so that
observation data is available to the estimation method submodule of the
MSE.</p>
<p>The types of observations (RPN, RPW, age compositions, etc.)
specified in the provided <code>sable_om$model_options$obs_pars</code>
object should be retained when used in the MSE simulation loop to ensure
compatability with the estimation model.</p>
</div>
<div class="section level3">
<h3 id="the-full-operating-model-object">The Full Operating Model Object<a class="anchor" aria-label="anchor" href="#the-full-operating-model-object"></a>
</h3>
<p>A fully parameterized OM object, <code>sable_om</code>, is available
through the <code>SablefishMSE</code> package. This OM object contains a
full set of demographic parameter matrices, observation process
parameters, and an array of initial numbers-at-age.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sable_om</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"data"</span>, <span class="st">"sablefish_om_big.RDS"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sable_om</span><span class="op">$</span><span class="va">dem_params</span></span>
<span><span class="va">sable_om</span><span class="op">$</span><span class="va">model_options</span><span class="op">$</span><span class="va">obs_pars</span></span>
<span><span class="va">sable_om</span><span class="op">$</span><span class="va">init_naa</span></span></code></pre></div>
<p>The provided <code>sable_om</code> object defines an OM object
compatible with <code>afscOM</code>, however, an additional component
that defines how future recruitment is to be simulated is required for
use within the MSE simulation loop. For more information on specifying
future recruitment, see the <a href="02_recruitment.html">Defining
Recruitment Functions Page</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua Zahner, Benjamin Williams, Dan Goethel, Curry Cunningham, Matt Cheng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
